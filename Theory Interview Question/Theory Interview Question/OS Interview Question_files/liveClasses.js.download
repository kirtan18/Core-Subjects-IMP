$(".classes-table tr:even").css("background-color","#faf7f7");$(".classes-table tr:odd").css("background-color","#ffffff");$(".classesToggleJs").click(function(){var dataId=$(this).data("id");var upIcon=resultSet.UP_ICON_CLASS;var downIcon=resultSet.DOWN_ICON_CLASS;if($("#"+dataId+" tr").length>5){$("#"+dataId+" tr:gt(4)").toggle();var IconObj=$(this).find(".showIconJs");var showTextObj=$(this).find(".showTextJs");if(IconObj.hasClass(upIcon)){IconObj.removeClass(upIcon);IconObj.addClass(downIcon);showTextObj.text("Show More");$("html, body").animate({scrollTop:$("#"+dataId).parent().offset().top},1500)}else{IconObj.removeClass(downIcon);IconObj.addClass(upIcon);showTextObj.text("Show Less")}}});$(".class-join-js-btn").click(function(){if($(this).data("url")!=""&&$(this).data("url")!=undefined){url=$(this).data("url");platform=$(this).data("platform");$("a.join-link").attr("href",url);if(url.length>1){if(platform==1){window.open(url,"_blank")}else{var t=$.trim($(this).text());var c=$.trim($(this).data("cid"));if(t=="Enter Class"||t==="Enter Class"){var base_url=window.location.origin;doVerifyClassLauch(base_url,c,url)}else{launchClass(url)}}}}else{loadMsg("Process Error, please try again later");return false}});var launchClass=function(url){$("#class-div-js").css("background-image","url(https://media.geeksforgeeks.org/img-practice/gfg_rev.gif)");$("#taking-time-to-join").css("display","block");$("#class-iframe-src").attr("src",url);$("#class-div-js").css("display","block");$(".cancel-class-section").css("display","block");$(".header--main").css("display","none")};var doVerifyClassLauch=function(base_url,c,url){$("#loaderMask").show();$.ajax({url:base_url+"/dashboard/wiziq/saveLiveClassesData.php",type:"POST",data:{cid:c,requestType:"doVerifyClassLauch"},dataType:"json",success:function(results){$("#loaderMask").hide();if(results.status==false){loadMsg("Class is not started yet, Please wait for the host to start the class..")}else{launchClass(url)}},error:function(errors){$("#loaderMask").hide();loadMsg("Something went wrong, Please reload the page and try again..")}});$("#loaderMask").hide()};var currentPlayer,videoToken;$(".play-media-js").click(function(){currentPlayer=undefined;var url=$(this).data("url");videoToken=$(this).data("token");if(url!=""){setTimeout(function(){$("#classroomVideoModal").focus()},500);currentPlayer=videojs("classroomVideoModal",{playbackRates:[.5,.75,1,1.25,1.5,2],html5:{nativeAudioTracks:false,nativeVideoTracks:false,hls:{debug:true,overrideNative:true,enableLowInitialPlaylist:true,smoothQualityChange:true}}});currentPlayer.ready(function(){this.src({src:resultSet.URL_S3_LIVE+url,type:"application/x-mpegURL",withCredentials:false});currentPlayer.hlsQualitySelector();currentPlayer.play();this.hotkeys({volumeStep:.1,seekStep:10,enableModifiersForNumbers:false,alwaysCaptureHotkeys:true,forwardKey:function(event,player){if(event.which==39){$(".forwardIcon").show().delay(10).fadeOut();setTimeout(function(){$("#classroomVideoModal").focus()},500)}return event.which==39},rewindKey:function(event,player){if(event.which==37){$(".backwardIcon").show().delay(10).fadeOut();setTimeout(function(){$("#classroomVideoModal").focus()},500)}return event.which==37},volumeUpKey:function(event,player){if(event.which==38){player.muted(false);var currentVolume=$(".vjs-volume-bar").attr("aria-valuenow");$(".volumeIcon").html('<i class="fa fa-volume-up"></i> '+currentVolume+"%");$(".volumeIcon").show().delay(50).fadeOut();setTimeout(function(){$("#classroomVideoModal").focus()},500)}return event.which==38},volumeDownKey:function(event,player){if(event.which==40){$(".volumeIcon").html('<i class="fa fa-volume-down"></i> '+$(".vjs-volume-bar").attr("aria-valuenow")+"%");$(".volumeIcon").show().delay(50).fadeOut();setTimeout(function(){$("#classroomVideoModal").focus()},500)}return event.which==40}})});currentPlayer.one("play",function(e){var content='<style>.video-js:before{content: "'+user_email+'";}</style>';$("head").append(content)});currentPlayer.on("error",function(e){errorHandling(e,"classroomVideo")});currentPlayer.on("ratechange",function(){setTimeout(function(){$("#classroomVideoModal").focus()},500)});$("#classroomVideo").modal("show");$("#classroomVideoModal").append('<div class="forwardIcon text-center" style="display:none; position: absolute;top: 44%;left: 80%; z-index: 9999; font-size:25px;"><i class="fa fa-forward"></i><span style="margin-bottom:50%"> 10</span></div><div class="backwardIcon text-center" style="display:none;position: absolute;top: 44%;left: 10%;z-index: 9999; font-size:25px;">10 <i class="fa fa-backward"></i></div><div class="volumeIcon text-center" style="position: absolute;z-index: 9999;top: 10%; left: 80%;font-size: 20px;"></div>')}setTimeout(function(){$("#classroomVideoModal").focus()},500)});$("#classroomVideo").on("hidden.bs.modal",function(){currentPlayer.pause();currentPlayer.reset()});$(".see-content-js").click(function(){var cid=$.trim($(this).data("cid"));if(cid!=""&&cid!=undefined){$("#loaderMask").show();$.ajax({url:resultSet.URL_HOME+"/dashboard/wiziq/saveLiveClassesData.php",type:"POST",data:{classId:cid,requestType:"getClassContent"},dataType:"json",success:function(results){$("#loaderMask").hide();if(results!=undefined&&results.length>0){$("#categoryChangeAlertModal .modal-title").text("Class Content");$("#categoryChangeAlertModal .modal-body .message").text("");$("#categoryChangeAlertModal .modal-footer").css("display","none");$("#categoryChangeAlertModal #crosssBtn").css("display","block");$("#categoryChangeAlertModal .modal-body ul").remove();$("#categoryChangeAlertModal .modal-body").append("<ul style='word-wrap: anywhere;list-style: circle;'></ul>");var url=resultSet.URL_HOME+"/dashboard/wiziq/saveLiveClassesData.php";$.each(results,function(i,d){var data="<li style='width: 100%;padding: 0.7em;border-bottom: 1px solid black;border-bottom-style:dotted; overflow:hidden;'>";data+="<span style='float:left;'>"+d["name"]+"</span>";data+="<span style='cursor:pointer;float:right;' class='download-content-js'>";data+="<a style='color:black;' href="+url+"?requestType=performDownload&cid="+cid+"&name="+d["ks"]+"><i title='Download' class='fa fa-download' aria-hidden='true'></i></a></span>";data+="</li>";$("#categoryChangeAlertModal .modal-body ul").append(data)});$(".categoryChangePopUp").click()}else{loadMsg("No content available")}},error:function(error){$("#loaderMask").hide();loadMsg("System error, Please try again..");return false}})}else{loadMsg("System error, Please try again..")}});var loadMsg=function(message){$("#categoryChangeAlertModal .modal-title").text("Message");$("#categoryChangeAlertModal .modal-body ul").remove();$("#categoryChangeAlertModal .modal-body .message").text(message);$("#categoryChangeAlertModal .modal-body .message").css("word-wrap","break-word");$("#categoryChangeAlertModal .modal-footer").css("display","none");$("#categoryChangeAlertModal #crosssBtn").css("display","block");$(".categoryChangePopUp").click()};